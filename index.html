<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="phonegap.js"></script>
		<style>
			html,body{
				color:white;
				background-color:#262626;
			}
		    .loadingDiv {
				position:fixed;
				left:0px;
				top:0px;
				right:0px;
				bottom:0px;
				background-color: #262626;
			}
			#loadingLogo{
				text-align: center;
				position: fixed;
				top: 50%;
				left: 50%;
				margin-top: -50px;
				margin-left: -100px;
			}
		</style>
		<title>WebIT Mobile</title>
		<link href="res/nortech_tabicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
	</head>
    <body>
		<!-- <div class=loadingDiv>
			<div id="loadingLogo">
				<img src="res/icon.png">
				<div id="message">
                    <h3>Loading - please wait...</h3>
                </div>
			</div>
		</div> -->

		<div data-role="page" id="page-redirect">

            <!--content-->
            <div role="main" class="ui-content jqm-content jqm-fullwidth" style="text-align:center">
                <div class=loadingDiv>
					<div id="loadingLogo">
						<img src="res/icon.png">
						<div id="message">
		                    <h3>Loading - please wait...</h3>
		                </div>
					</div>
				</div>
            </div>

            <!--footer-->
            <div data-role="footer" data-position="fixed">
                <h6>&copy Nortech International 2014</h6>
            </div>
        </div>

    </body>
    <script>
    	document.addEventListener("deviceready", onDeviceReady, false);

        function handleOffline(){
            $("#message").html("<h3>No internet connection!</h3>");   
        }
        
        function handleOnline(){
        	$("#message").html("<h3>Loading - please wait...</h3>");
            window.location = ("https://backup.myfootcount.com/Blitz/");
        }

    	function toggleCon(e) {
            if(e.type == "offline") {
                handleOffline();
            } else {
                handleOnline();
            }
        }

        function onDeviceReady() {
            //now safe to use the PhoneGap API - add connection listeners
            document.addEventListener("online", toggleCon, false);
            document.addEventListener("offline", toggleCon, false);
            //window.addEventListener("online", toggleCon, false); //using Navigator object
            //window.addEventListener("offline", toggleCon, false);
            
            //Android backbutton on login page should exit the app, not take user back to index.html on PGB
			document.addEventListener("backbutton", function(e){
			    if($.mobile.activePage.is('#page-login') || $.mobile.activePage.is('#page-redirect')){
			        /* 
			         Event preventDefault/stopPropagation not required as adding backbutton
			          listener itself override the default behaviour. Refer below PhoneGap link.
			        */
			        //e.preventDefault();
			        navigator.app.exitApp();
			    }
			    else {
			        navigator.app.backHistory()
			    }
			}, false);
            //hide splashscreen (otherwise will be visible for 3 sec, which is the default)
            navigator.splashscreen.hide();
        }

//        $(document).ready(function() {
//            window.location = ("https://backup.myfootcount.com/Blitz/");
//        });
    </script>

</html>
